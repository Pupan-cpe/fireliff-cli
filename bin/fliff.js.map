{"version":3,"sources":["../lib/fliff.js"],"names":["AddRequiredNameAndUrl","prompt","warn","EOL","input","help","ConfigRequiredIdSecretOrName","error","DeleteRequiredIdOrName","FailedToAddLIFF","FailedToInitPathExists","initPath","FailedToRetrieveIdUsingName","FailedToRetrieveNameUsingId","FailedToSetView","FailedToUnsetViews","RevokeTokenRequiredAccessToken","IssueTokenRequiredChannelIdAndSecret","TokenRequiredIssueOrRevoke","UpdateRequiredIdOrName","WarnPublicHostingConfig","current","preferred","info","FLIFF","ErrorMessages","constructor","init","Promise","resolve","reject","fbjsonPath","path","distPath","basename","errMakeDir","code","FLIFFError","copy","require","__dirname","junk","dot","filter","errCopy","rsCopy","sort","a","b","dest","files","map","file","message","fbjson","hosting","public","installNow","start","get","name","validator","default","errPrompt","rsPrompt","indexOf","toLowerCase","spawn","cmdInstall","cwd","console","log","stderr","on","data","toString","add","options","url","type","replace","description","req","LIFFAddRequest","accessToken","FunctionsConfig","AccessToken","view","res","ble","features","send","response","LIFFConfig","setView","liffId","config","result","id","secret","token","SingleChannelGroup","set","ChannelIdName","errId","ChannelSecretName","errSecret","AccessTokenName","errToken","issue","revoke","undefined","ChannelId","ChannelSecret","OAuthIssueTokenRequest","tokenData","status","access_token","expiresIn","expires_in","token_type","save","statusText","error_description","OAuthRevokeTokenRequest","delete","getViewIdByName","getViewNameById","LIFFDeleteRequest","viewNames","getViewNamesById","all","viewName","unsetView","update","LIFFUpdateRequest","LIFFGetRequest","apps","app","views","Object","keys","key","row","join","detail","Description","BLE"],"mappings":"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","sourcesContent":["import { mkdir, existsSync } from 'fs';\nimport { EOL } from 'os';\nimport * as path from 'path';\nimport './colors-set-theme';\nimport { FLIFFError } from './fliff-error';\nimport { FunctionsConfig } from './functions-config';\nimport { LIFFConfig } from './liff-config';\nimport { LIFFAddRequest } from './liff-add-request';\nimport { LIFFDeleteRequest } from './liff-delete-request';\nimport { LIFFGetRequest } from './liff-get-request';\nimport { LIFFUpdateRequest } from './liff-update-request';\nimport { OAuthIssueTokenRequest } from './oauth-issue-token-request';\nimport { OAuthRevokeTokenRequest } from './oauth-revoke-token-request';\n\nconst AddRequiredNameAndUrl = `Command ${'fliff add'.prompt} required name and url options`.warn + EOL +\n    `Try re-run with option ${'--name <viewName>'.input} AND ${'--url <viewURL>'.input}`.help;\nconst ConfigRequiredIdSecretOrName = `Failed to configure channel. ${'fliff config'.prompt} required id, secret or token options.`.error + EOL +\n    `Try re-run with option ${'--id <channelId>'.input} OR ${'--secret <channelSecret>'.input} OR ${'--token <channelToken>'.input}`.help;\nconst DeleteRequiredIdOrName = `Command ${'fliff delete'.prompt} required LIFF ID or name option`.warn + EOL +\n    `Try re-run with option ${'--id <liffId>'.input} OR ${'--name <viewName>'.input}`.help;\nconst FailedToAddLIFF = `Failed to add LIFF view`.error;\nconst FailedToInitPathExists = (initPath) => `${initPath} already exists`.error + EOL + `Please manually delete ${initPath} and try again`.help;\nconst FailedToRetrieveIdUsingName = `Failed to retrieve LIFF ID using view name`.error;\nconst FailedToRetrieveNameUsingId = `Failed to retrieve view name using LIFF ID`.error;\nconst FailedToSetView = `Failed to set view in Functions configuration`.error;\nconst FailedToUnsetViews = `Failed to unset view(s) in Functions configuration`.error;\nconst RevokeTokenRequiredAccessToken = `Command ${'fliff token --revoke'.prompt} required access token.`.warn + EOL +\n    `Try re-run with access token ${'fliff token --revoke <accessToken>'.input}`.help;\nconst IssueTokenRequiredChannelIdAndSecret = `Command ${'fliff token'.prompt} required Channel ID and Secret to be configured first`.error + EOL +\n    `Try run ${'fliff config --id <channelId> --secret <channelSecret>'.input} to configure before re-run ${'fliff token'.prompt} again.`.help;\nconst TokenRequiredIssueOrRevoke = `Command ${'fliff token'.prompt} required issue or revoke options.`.error + EOL +\n    `Try re-run with option ${'--issue'.input} OR ${'--revoke'.input}`.help;\nconst UpdateRequiredIdOrName = `Command ${'fliff update'.prompt} required LIFF ID or name option`.warn + EOL +\n    `Try re-run with option ${'--id <liffId>'.input} OR ${'--name <viewName>'.input}`.help;\nconst WarnPublicHostingConfig = (current, preferred) => `firebase.json currently set hosting.public to ${current.error}`.warn + EOL + `Please change hosting.public to ${preferred.info}`.warn;\n\nexport class FLIFF {\n\n    static get ErrorMessages() {\n        return {\n            AddRequiredNameAndUrl,\n            ConfigRequiredIdSecretOrName,\n            DeleteRequiredIdOrName,\n            FailedToAddLIFF,\n            FailedToInitPathExists,\n            FailedToRetrieveIdUsingName,\n            FailedToRetrieveNameUsingId,\n            FailedToSetView,\n            FailedToUnsetViews,\n            RevokeTokenRequiredAccessToken,\n            IssueTokenRequiredChannelIdAndSecret,\n            TokenRequiredIssueOrRevoke,\n            UpdateRequiredIdOrName,\n            WarnPublicHostingConfig\n        };\n    }\n\n    constructor() {\n    }\n\n    init(initPath) {\n        return new Promise((resolve, reject) => {\n            const fbjsonPath = path.resolve(initPath, '../firebase.json');\n            const distPath = `${path.basename(initPath)}/dist`;\n\n            mkdir(initPath, errMakeDir => {\n                if (errMakeDir) {\n                    switch (errMakeDir.code) {\n                        case 'EEXIST':\n                            return reject(new FLIFFError(FLIFF.ErrorMessages.FailedToInitPathExists(initPath)));\n                        default:\n                            return reject(errMakeDir);\n                    }\n                }\n\n                const copy = require('recursive-copy');\n\n                copy(path.resolve(__dirname, '../templates/web-views'), initPath, {\n                    junk: false,\n                    dot: true,\n                    filter: [\n                        '*',\n                        'src/**/*',\n                        '!.cache',\n                        '!package-lock.json',\n                        '!dist',\n                        '!node_modules'\n                    ]\n                }, (errCopy, rsCopy) => {\n\n                    if (errCopy) {\n                        return reject(errCopy);\n                    }\n\n                    rsCopy.sort((a, b) => (a.dest > b.dest) ? 1 : ((b.dest > a.dest) ? -1 : 0));\n\n                    const files = rsCopy.map(file => file.dest);\n                    let message = '';\n\n                    if (existsSync(fbjsonPath)) {\n                        const fbjson = require(fbjsonPath);\n\n                        if (fbjson.hosting && fbjson.hosting.public !== distPath) {\n                            message = FLIFF.ErrorMessages.WarnPublicHostingConfig(fbjson.hosting.public, distPath);\n                        }\n                    }\n\n                    return resolve({ files, message });\n                });\n            });\n        });\n    }\n\n    installNow(initPath) {\n        return new Promise((resolve, reject) => {\n            this.prompt = require('prompt');\n\n            this.prompt.message = ''; // Workaround: Remove annoying prompt: prefix\n            this.prompt.start();\n            this.prompt.get([{\n                name: 'installNow',\n                message: 'Do you want to install node modules now? [yes/no]',\n                validator: /y[es]*|n[o]?/,\n                default: 'yes'\n            }], (errPrompt, rsPrompt) => {\n                if (errPrompt) {\n                    return reject(errPrompt);\n                }\n\n                if (['yes', 'y'].indexOf(rsPrompt.installNow.toLowerCase()) > -1) {\n                    const spawn = require('child_process').spawn;\n                    const cmdInstall = spawn('npm', ['i', '--loglevel=error'], { cwd: initPath });\n                    console.log(`Installing node modules in ${initPath}. Please wait...`);\n                    cmdInstall.stderr.on('data', data => reject(data.toString()));\n                    cmdInstall.on('exit', code => {\n                        if (code === 0) {\n                            return resolve(true);\n                        }\n                        return reject(code);\n                    });\n                }\n            });\n        });\n    }\n\n    async add(options) {\n\n        if (!options.name || !options.url) {\n            return Promise.reject(new FLIFFError(FLIFF.ErrorMessages.AddRequiredNameAndUrl));\n        }\n\n        if (!options.type) {\n            options.type = 'full';\n        }\n\n        const name = options.name.toLowerCase().replace(/\\s/g, '_');\n        const description = (options.description) ? options.description : options.name;\n\n        const req = new LIFFAddRequest({ accessToken: FunctionsConfig.AccessToken });\n        const data = {\n            view: {\n                type: options.type,\n                url: options.url\n            },\n            description\n        };\n        let res;\n\n        if (options.ble) {\n            data.features = {\n                ble: (options.ble.toLowerCase() == 'false') ? false : true\n            };\n        }\n\n        try {\n            res = await req.send(data);\n        } catch (error) {\n            if (error.response && error.response.data && error.response.data.message) {\n                return Promise.reject(new FLIFFError(error.response.data.message.error));\n            } else {\n                return Promise.reject(new FLIFFError(FLIFF.ErrorMessages.FailedToAddLIFF));\n            }\n        }\n\n        try {\n            return await LIFFConfig.setView(name, res.data.liffId);\n        } catch (error) {\n            return Promise.reject(new FLIFFError(FLIFF.ErrorMessages.FailedToSetView));\n        }\n    }\n\n    async config(options) {\n        let result = {};\n\n        if (!options.id && !options.secret && !options.token) {\n            return Promise.reject(new FLIFFError(FLIFF.ErrorMessages.ConfigRequiredIdSecretOrName));\n        } else {\n            result[FunctionsConfig.SingleChannelGroup] = {};\n        }\n\n        if (options.id) {\n            try {\n                await FunctionsConfig.set(`${FunctionsConfig.SingleChannelGroup}.${FunctionsConfig.ChannelIdName}`, options.id);\n                result[FunctionsConfig.SingleChannelGroup][FunctionsConfig.ChannelIdName] = options.id;\n            } catch (errId) {\n                return Promise.reject(errId);\n            }\n        }\n\n        if (options.secret) {\n            try {\n                await FunctionsConfig.set(`${FunctionsConfig.SingleChannelGroup}.${FunctionsConfig.ChannelSecretName}`, options.secret);\n                result[FunctionsConfig.SingleChannelGroup][FunctionsConfig.ChannelSecretName] = options.secret;\n            } catch (errSecret) {\n                return Promise.reject(errSecret);\n            }\n        }\n\n        if (options.token) {\n            try {\n                await FunctionsConfig.set(`${FunctionsConfig.SingleChannelGroup}.${FunctionsConfig.AccessTokenName}`, options.token);\n                result[FunctionsConfig.SingleChannelGroup][FunctionsConfig.AccessTokenName] = options.token;\n            } catch (errToken) {\n                return Promise.reject(errToken);\n            }\n        }\n\n        return result;\n    }\n\n    async token(options) {\n\n        if (!options.issue && options.revoke === undefined) {\n            return Promise.reject(new FLIFFError(FLIFF.ErrorMessages.TokenRequiredIssueOrRevoke));\n        }\n\n        if (options.issue === true) {\n\n            if (!FunctionsConfig.ChannelId || !FunctionsConfig.ChannelSecret) {\n                return Promise.reject(new FLIFFError(FLIFF.ErrorMessages.IssueTokenRequiredChannelIdAndSecret));\n            }\n\n            try {\n                const req = new OAuthIssueTokenRequest();\n                const res = await req.send(FunctionsConfig.ChannelId, FunctionsConfig.ChannelSecret);\n                const tokenData = (res.status === 200) ? {\n                    accessToken: res.data.access_token,\n                    expiresIn: res.data.expires_in,\n                    type: res.data.token_type\n                } : false;\n\n                if (tokenData) {\n                    if (options.save === true) {\n                        await FunctionsConfig.set(`${FunctionsConfig.SingleChannelGroup}.${FunctionsConfig.AccessTokenName}`, tokenData.accessToken);\n\n                        return tokenData;\n                    }\n\n                    return tokenData;\n                } else {\n                    return Promise.reject(new FLIFFError(res.statusText));\n                }\n            } catch (error) {\n                if (error.response && error.response.data && error.response.data.error_description) {\n                    return Promise.reject(error.response.data.error_description);\n                } else {\n                    return Promise.reject(error);\n                }\n            }\n\n        } else if (options.revoke !== undefined) {\n\n            if (options.revoke === null) {\n                return Promise.reject(new FLIFFError(FLIFF.ErrorMessages.RevokeTokenRequiredAccessToken));\n            }\n\n            try {\n                const req = new OAuthRevokeTokenRequest();\n                const res = await req.send(options.revoke);\n\n                return (res.status === 200) ? true : Promise.reject(new FLIFFError(res.statusText));\n            } catch (error) {\n                if (error.response && error.response.data && error.response.data.error_description) {\n                    return Promise.reject(error.response.data.error_description);\n                } else {\n                    return Promise.reject(error);\n                }\n            }\n\n        }\n\n    }\n\n\n    async delete(options) {\n\n        if (!options.id && !options.name) {\n            return Promise.reject(new FLIFFError(FLIFF.ErrorMessages.DeleteRequiredIdOrName));\n        }\n\n        if (!options.id) {\n            options.id = await LIFFConfig.getViewIdByName(options.name, FunctionsConfig.config);\n            if (typeof options.id !== 'string') {\n                return Promise.reject(new FLIFFError(FLIFF.ErrorMessages.FailedToRetrieveIdUsingName));\n            }\n        }\n\n        if (!options.name) {\n            options.name = await LIFFConfig.getViewNameById(options.id, FunctionsConfig.config);\n            if (typeof options.name !== 'string') {\n                return Promise.reject(new FLIFFError(FLIFF.ErrorMessages.FailedToRetrieveNameUsingId));\n            }\n        }\n\n        try {\n            const req = new LIFFDeleteRequest({ accessToken: FunctionsConfig.AccessToken });\n            await req.send(options.id);\n        } catch (error) {\n            if (error.response && error.response.data) {\n                if (error.response.data.message !== 'not found') {\n                    return Promise.reject(error.response.data.error);\n                }\n            } else {\n                return Promise.reject(error);\n            }\n        }\n\n        try {\n            const viewNames = await LIFFConfig.getViewNamesById(options.id, FunctionsConfig.config);\n            await Promise.all(viewNames.map(viewName => LIFFConfig.unsetView(viewName)));\n\n            return viewNames;\n        } catch (error) {\n            return Promise.reject(new FLIFFError(FLIFF.ErrorMessages.FailedToUnsetViews));\n        }\n\n    }\n\n    async update(options) {\n        let data = {};\n\n        if (!options.id && !options.name) {\n            return Promise.reject(new FLIFFError(FLIFF.ErrorMessages.UpdateRequiredIdOrName));\n        }\n\n        if (!options.id) {\n            options.id = await LIFFConfig.getViewIdByName(options.name, FunctionsConfig.config);\n            if (typeof options.id !== 'string') {\n                return Promise.reject(new FLIFFError(FLIFF.ErrorMessages.FailedToRetrieveIdUsingName));\n            }\n        }\n\n        if (!options.name) {\n            options.name = await LIFFConfig.getViewNameById(options.id, FunctionsConfig.config);\n            if (typeof options.name !== 'string') {\n                return Promise.reject(new FLIFFError(FLIFF.ErrorMessages.FailedToRetrieveNameUsingId));\n            }\n        }\n\n        if (options.type || options.url) {\n            data.view = {};\n            if (options.type) {\n                data.view.type = options.type;\n            }\n            if (options.url) {\n                data.view.url = options.url;\n            }\n        }\n\n        if (options.description) {\n            data.description = options.description;\n        }\n\n        if (options.ble) {\n            data.features = {\n                ble: (options.ble.toLowerCase() == 'false') ? false : true\n            };\n        }\n\n        try {\n            const req = new LIFFUpdateRequest({ accessToken: FunctionsConfig.AccessToken });\n\n            return await req.send(options.id, data);\n        } catch (error) {\n            if (error.response && error.response.data && error.response.data.message) {\n                return Promise.reject(error.response.data.message.error);\n            } else {\n                return Promise.reject(error);\n            }\n        }\n\n    }\n\n    async get(options) {\n        try {\n            const req = new LIFFGetRequest({ accessToken: FunctionsConfig.AccessToken });\n            const res = await req.send();\n\n            return res.data.apps.map(app => {\n                const views = Object.keys(FunctionsConfig.config.views).filter(key => {\n                    return FunctionsConfig.config.views[key] === app.liffId;\n                });\n\n                const row = {\n                    'View': views.join(', '),\n                    'LIFF ID': app.liffId,\n                    'Type': app.view.type,\n                    'URL': app.view.url\n                };\n\n                if (options.detail) {\n                    row.Description = app.description || '';\n                    row.BLE = (app.features && app.features.ble) ? '\\u2713' : '\\u2613';\n                }\n\n                return row;\n            });\n\n        } catch (error) {\n            if (error.response && error.response.data && error.response.data.message) {\n                if (error.response.data.message === 'no apps') {\n                    return 'LIFF app not found'.info;\n                } else {\n                    return Promise.reject(error.response.data.message.error);\n                }\n            } else {\n                return Promise.reject(error);\n            }\n        }\n    }\n\n}\n"],"file":"fliff.js"}