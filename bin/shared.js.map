{"version":3,"sources":["../lib/shared.js"],"names":["getValidatedConfig","console","log","verbose","config","FunctionsConfig","get","line","access_token","help","code","prompt","process","exit","error","info"],"mappings":";;;;;;;AAAA;;AAEO,eAAeA,kBAAf,GAAoC;AACvC,MAAI;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,uCAAuCC,OAAnD;AACA,QAAIC,MAAM,GAAG,MAAMC,iCAAgBC,GAAhB,EAAnB;;AACA,QAAI,CAACF,MAAM,CAACG,IAAR,IAAgB,CAACH,MAAM,CAACG,IAAP,CAAYC,YAAjC,EAA+C;AAC3CP,MAAAA,OAAO,CAACC,GAAR,CAAY,uDAAuDO,IAAnE;AACAR,MAAAA,OAAO,CAACC,GAAR,CAAY,yEAAyEO,IAArF;AACAR,MAAAA,OAAO,CAACC,GAAR,CAAa,GAAE,mDAAmDQ,IAAK,GAAE,uBAAuBC,MAAO,EAAvG;AACAC,MAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACH;;AACD,WAAOT,MAAP;AACH,GAVD,CAUE,OAAOU,KAAP,EAAc;AACZb,IAAAA,OAAO,CAACC,GAAR,CAAY,8BAA8BY,KAA1C;AACAb,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAea,IAA3B;AACAd,IAAAA,OAAO,CAACC,GAAR,CAAa,OAAM,gBAAgBQ,IAAK,sDAA5B,CAAkFP,OAA9F;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAa,OAAM,qBAAqBQ,IAAK,yBAAjC,CAA0DP,OAAtE;AACAS,IAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACH;AACJ;;AAAA","sourcesContent":["import { FunctionsConfig } from './functions-config';\n\nexport async function getValidatedConfig() {\n    try {\n        console.log('Get Firebase Functions configuration'.verbose);\n        let config = await FunctionsConfig.get();\n        if (!config.line || !config.line.access_token) {\n            console.log('Functions configuration not found: line.access_token'.help);\n            console.log('Find your LINE channel access token and use with the following command'.help);\n            console.log(`${'firebase functions:config:set line.access_token='.code}${'<channelAccessToken>'.prompt}`);\n            process.exit(1);\n        }\n        return config;\n    } catch (error) {\n        console.log('Failed to get configuration'.error);\n        console.log('Suggestions:'.info);\n        console.log(`Run ${'firebase init'.code} to start a project directory in the current folder.`.verbose);\n        console.log(`Run ${'firebase use --add'.code} to set active project.`.verbose);\n        process.exit(1);\n    }\n};\n"],"file":"shared.js"}