{"version":3,"sources":["../lib/cli.js"],"names":["colors","setTheme","silly","input","verbose","prompt","info","data","help","warn","code","error","commandLineArgs","require","operation","_unknown","name","defaultOption","stopAtFirstUnknown","argv","options","type","String","alias","Boolean","getConfig","console","log","config","FunctionsConfig","get","line","access_token","process","exit","indexOf","then","accessToken","viewNames","req","res","LIFFAddRequest","view","url","send","liffId","LIFFConfig","setView","LIFFDeleteRequest","id","getViewIdByName","response","message","getViewNamesById","Promise","all","map","viewName","unsetView","LIFFGetRequest","table","apps","app","views","Object","keys","filter","key","join","LIFFUpdateRequest","getViewNameById","pjson","version"],"mappings":"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","sourcesContent":["#!/usr/bin/env node\nimport 'console.table';\nimport * as colors from 'colors';\nimport pjson from '../package.json';\nimport { FunctionsConfig, LIFFAddRequest, LIFFConfig, LIFFDeleteRequest, LIFFGetRequest, LIFFUpdateRequest } from './index';\n\ncolors.setTheme({\n    silly: 'rainbow',\n    input: 'grey',\n    verbose: 'cyan',\n    prompt: 'grey',\n    info: 'green',\n    data: 'white',\n    help: 'cyan',\n    warn: 'yellow',\n    code: 'blue',\n    error: 'red'\n});\n\nconst commandLineArgs = require('command-line-args');\nconst { operation, _unknown } = commandLineArgs([\n    { name: 'operation', defaultOption: true }\n], { stopAtFirstUnknown: true });\nconst argv = _unknown || [];\nconst options = commandLineArgs([\n    { name: 'id', type: String },\n    { name: 'name', type: String },\n    { name: 'type', type: String },\n    { name: 'url', type: String },\n    { name: 'version', alias: 'v', type: Boolean }\n], { argv });\n\nasync function getConfig() {\n    try {\n        console.log('Get Firebase Functions configuration'.verbose);\n        let config = await FunctionsConfig.get();\n        if (!config.line || !config.line.access_token) {\n            console.log('Functions configuration not found: line.access_token'.help);\n            console.log('Find your LINE channel access token and use with the following command'.help);\n            console.log(`${'firebase functions:config:set line.access_token='.code}${'<channelAccessToken>'.prompt}`);\n            process.exit(1);\n        }\n        return config;\n    } catch (error) {\n        console.log('Failed to get configuration'.error);\n        console.error(error);\n        process.exit(1);\n    }\n}\n\n// Commands that need Functions config\nif (['add', 'update', 'delete', 'get'].indexOf(operation) > -1) {\n    getConfig().then(async (config) => {\n        let accessToken = config.line.access_token;\n        let viewNames;\n        let data;\n        let req;\n        let res;\n\n        switch (operation) {\n            case 'add':\n                req = new LIFFAddRequest({ accessToken });\n                data = {\n                    view: {\n                        type: options.type,\n                        url: options.url\n                    }\n                };\n                try {\n                    console.log('Sending request to add LIFF view...'.verbose);\n                    res = await req.send(data);\n                } catch (error) {\n                    console.log(`Failed to add LIFF view`.error);\n                    console.error(error);\n                    process.exit(1);\n                }\n\n                try {\n                    console.log(`Created ${options.name.input} view with LIFF ID: ${res.data.liffId.info}`.verbose);\n                    await LIFFConfig.setView(options.name, res.data.liffId);\n                } catch (error) {\n                    console.log(`Failed to set Functions configuration`.error);\n                    console.log(`Try re-run with the following command`.help);\n                    console.log(`firebase functions:config:set views.${options.name}=${res.data.liffId}`.prompt);\n                    console.error(error);\n                    process.exit(1);\n                }\n\n                break;\n\n            case 'delete':\n                req = new LIFFDeleteRequest({ accessToken });\n                if (!options.id && !options.name) {\n                    console.warn(`Command ${'fliff delete'.prompt} required LIFF ID or name option`.warn);\n                    console.log(`Try re-run ${'fliff delete --id <liffId>'.input} OR  ${'fliff delete --name <viewName>'.input}`.help);\n                    process.exit(1);\n                }\n\n                if (options.name) {\n                    options.id = LIFFConfig.getViewIdByName(options.name, config);\n                    if (typeof options.id !== 'string') {\n                        console.error(`Failed to retrieve LIFF ID with view name ${options.name.input}`.error);\n                        process.exit(1);\n                    }\n                }\n\n                try {\n                    console.log(`Sending request to delete LIFF view ${options.id.input}`.verbose);\n                    res = await req.send(options.id);\n                    console.log(`Deleted view with LIFF ID: ${options.id.input}`.verbose);\n                } catch (error) {\n                    if (error.response && error.response.data) {\n                        if (error.response.data.message === 'not found') {\n                            console.log('LIFF app not found'.info);\n                        } else {\n                            console.log(`Failed to delete LIFF view ${options.id.input}`.error);\n                            console.error(error.response.data.error);\n                            process.exit(1);\n                        }\n                    } else {\n                        console.log(`Failed to delete LIFF view ${options.id.input}`.error);\n                        console.error(error);\n                        process.exit(1);\n                    }\n                }\n\n                try {\n                    viewNames = LIFFConfig.getViewNamesById(options.id, config);\n                    await Promise.all(viewNames.map(viewName => LIFFConfig.unsetView(viewName)));\n                    console.log(`Unset view(s) in Functions configuration`.info, viewNames);\n                } catch (error) {\n                    console.log(`Failed to unset view(s) in Functions configuration`.error);\n                    console.log(`Try looking for view name with LIFF ID ${options.id.input} using ${'fliff get'.prompt} command and unset it manually`.help);\n                    console.log(`firebase functions:config:unset views.<viewName>`.prompt);\n                    console.error(error);\n                    process.exit(1);\n                }\n                break;\n\n            case 'get':\n                req = new LIFFGetRequest({ accessToken });\n                try {\n                    console.log('Sending request to get LIFF view(s)...'.verbose);\n                    res = await req.send();\n                    console.table(res.data.apps.map(app => {\n                        const views = Object.keys(config.views).filter(key => {\n                            return config.views[key] === app.liffId;\n                        });\n\n                        return {\n                            'View': views.join(', '),\n                            'LIFF ID': app.liffId,\n                            'Type': app.view.type,\n                            'URL': app.view.url\n                        };\n                    }));\n                } catch (error) {\n                    if (error.response && error.response.data) {\n                        if (error.response.data.message === 'no apps') {\n                            console.log('LIFF app not found'.info);\n                            process.exit(0);\n                        } else {\n                            console.error(error.response.data.error);\n                            process.exit(1);\n                        }\n                    } else {\n                        console.error(error);\n                        process.exit(1);\n                    }\n                }\n\n                break;\n\n            case 'update':\n                req = new LIFFUpdateRequest({ accessToken });\n                if (!options.id && !options.name) {\n                    console.warn(`Command ${'fliff update'.prompt} required LIFF ID or name option`.warn);\n                    console.log(`Try re-run with option ${'--id <liffId>'.input} OR ${'--name <viewName>'.input}`.help);\n                    process.exit(1);\n                }\n\n                if (!options.id) {\n                    options.id = LIFFConfig.getViewIdByName(options.name, config);\n                    if (typeof options.id !== 'string') {\n                        console.error(`Failed to retrieve LIFF ID with view name ${options.name.input}`.error);\n                        process.exit(1);\n                    }\n                }\n                if (!options.name) {\n                    options.name = LIFFConfig.getViewNameById(options.id, config);\n                    if (typeof options.name !== 'string') {\n                        console.error(`Failed to retrieve view name with LIFF ID ${options.id.input}`.error);\n                        process.exit(1);\n                    }\n                }\n\n                if (!options.type || !options.url) {\n                    console.warn(`Command ${'fliff update'.prompt} required both LIFF type AND url options to be updated`.warn);\n                    console.log(`Try re-run with options ${'--type <type> --url <url>'.input}`.help);\n                    process.exit(1);\n                }\n\n                data = {\n                    type: options.type,\n                    url: options.url\n                };\n\n                try {\n                    console.log(`Sending request to update LIFF view ${options.id.input}`.verbose);\n                    res = await req.send(options.id, data);\n                    console.log(`Updated view with LIFF ID: ${options.id.input}`.verbose);\n                } catch (error) {\n                    console.log(`Failed to update LIFF view ${options.id.input}`.error);\n                    if (error.response && error.response.data && error.response.data.message) {\n                        console.log(error.response.data.message.error, data);\n                    } else {\n                        console.error(error);\n                    }\n                    process.exit(1);\n                }\n\n                break;\n\n            default:\n\n        }\n\n    });\n} else if (operation) {\n    switch (operation) {\n        case 'version':\n            console.log(`Version: ${pjson.version}`);\n            break;\n        case 'help':\n        default:\n            // TODO: Display help message\n    }\n} else if (options.version) {\n    console.log(`Version: ${pjson.version}`);\n}\n"],"file":"cli.js"}